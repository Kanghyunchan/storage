import java.util.InputMismatchException;
import java.util.Scanner;

public class PensionManagerSystem {

	public static void customerMenu(CustomerManager customerManager) {
		Scanner input = new Scanner(System.in);
		int select = 0;

		System.out.println("고객관리메뉴");

		while (select != 5) {
			try {
				System.out.println("원하는 기능의 번호를 입력해주세요. (1.고객등록, 2.고객검색, " + "3.고객 정보 수정, 4.고객 정보 삭제, 5.뒤로가기)");
				System.out.print(">>> ");
				select = input.nextInt();
				switch (select) {
				case 1:
					System.out.print("등록하실 고객의 ID를 입력해주세요: ");
					String id = input.next();
					if (customerManager.findById(id) != null) {
						System.out.println("ID 중복입니다.");
					} else {
						input = new Scanner(System.in);
						System.out
								.print("사용가능한 ID입니다. 이름, 전화번호, 이메일을 입력해주세요(양식. 홍길동, 010-1234-5678, hong@naver.com): ");
						String str = input.nextLine();
						Customer temp = new Customer(null, null, null, null);
						customerManager.addCustomer(temp.fromString(id.concat("," + str)));
					}
					break;
				case 2:
					break;
				case 3:
					break;
				case 4:
					break;
				case 5:
					break;
				default:
					System.out.println("입력이 잘못되었습니다.");
				}

			} catch (InputMismatchException e) {
				System.out.println("입력이 잘못되었습니다.");
				input = new Scanner(System.in);
			}
		}
	}

	public static void roomMenu() {

	}

	public static void reservationMenu() {

	}

	public static void main(String[] args) {
		CustomerManager customManager = new CustomerManager();
		RoomManager roomManager = new RoomManager();
		ReservationManager reservationManager = new ReservationManager();
		SystemFileManager fileManager = new SystemFileManager(customManager, roomManager, reservationManager);

		int select;
		boolean isLoop = true;
		Scanner input = new Scanner(System.in);
		fileManager.loadFromFile();
		System.out.println("펜션관리시스템");

		while (isLoop) {
			try {
				System.out.println("원하는 기능의 번호를 입력해주세요. (1.고객관리, 2.객실관리, 3.예약관리, 4.시스템종료)");
				System.out.print(">>> ");
				select = input.nextInt();
				switch (select) {
				case 1:
					customerMenu(customManager);
					break;
				case 2:
					roomMenu();
					break;
				case 3:
					reservationMenu();
					break;
				case 4:
					isLoop = false;
					input.close();
					fileManager.saveToFile();
					break;
				default:
					System.out.println("입력이 잘못되었습니다.");
				}
			} catch (InputMismatchException e) {
				System.out.println("입력이 잘못되었습니다.");
				input = new Scanner(System.in);
			}
		}
	}

}
